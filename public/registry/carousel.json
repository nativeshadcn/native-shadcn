{
  "name": "carousel",
  "type": "registry:ui",
  "description": "A carousel component for sliding content",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "utils",
    "button"
  ],
  "files": [
    {
      "path": "ui/carousel.tsx",
      "content": "import * as React from 'react';\nimport {\n  View,\n  ScrollView,\n  Pressable,\n  Text,\n  Dimensions,\n  NativeScrollEvent,\n  NativeSyntheticEvent,\n} from 'react-native';\nimport { cn } from '@/lib/utils';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\n\n// Carousel Context for composable architecture\ntype CarouselContextValue = {\n  scrollViewRef: React.RefObject<ScrollView>;\n  currentIndex: number;\n  itemCount: number;\n  itemWidth: number;\n  scrollToIndex: (index: number) => void;\n  scrollToNext: () => void;\n  scrollToPrevious: () => void;\n};\n\nconst CarouselContext = React.createContext<CarouselContextValue | undefined>(\n  undefined\n);\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext);\n  if (!context) {\n    throw new Error('Carousel components must be used within <Carousel>');\n  }\n  return context;\n}\n\n// Root Carousel Component\nexport interface CarouselProps extends React.ComponentPropsWithoutRef<typeof View> {\n  children: React.ReactNode;\n  itemWidth?: number;\n  onIndexChange?: (index: number) => void;\n}\n\nconst Carousel = React.forwardRef<React.ElementRef<typeof View>, CarouselProps>(\n  ({ children, itemWidth = SCREEN_WIDTH, onIndexChange, className, ...props }, ref) => {\n    const scrollViewRef = React.useRef<ScrollView>(null);\n    const [currentIndex, setCurrentIndex] = React.useState(0);\n    const [itemCount, setItemCount] = React.useState(0);\n\n    const scrollToIndex = React.useCallback(\n      (index: number) => {\n        if (scrollViewRef.current && index >= 0 && index < itemCount) {\n          scrollViewRef.current.scrollTo({\n            x: index * itemWidth,\n            animated: true,\n          });\n        }\n      },\n      [itemWidth, itemCount]\n    );\n\n    const scrollToNext = React.useCallback(() => {\n      const nextIndex = currentIndex + 1;\n      if (nextIndex < itemCount) {\n        scrollToIndex(nextIndex);\n      }\n    }, [currentIndex, itemCount, scrollToIndex]);\n\n    const scrollToPrevious = React.useCallback(() => {\n      const prevIndex = currentIndex - 1;\n      if (prevIndex >= 0) {\n        scrollToIndex(prevIndex);\n      }\n    }, [currentIndex, scrollToIndex]);\n\n    const contextValue = React.useMemo(\n      () => ({\n        scrollViewRef,\n        currentIndex,\n        itemCount,\n        itemWidth,\n        scrollToIndex,\n        scrollToNext,\n        scrollToPrevious,\n      }),\n      [currentIndex, itemCount, itemWidth, scrollToIndex, scrollToNext, scrollToPrevious]\n    );\n\n    React.useEffect(() => {\n      onIndexChange?.(currentIndex);\n    }, [currentIndex, onIndexChange]);\n\n    return (\n      <CarouselContext.Provider value={contextValue}>\n        <View ref={ref} className={cn('relative', className)} {...props}>\n          {children}\n        </View>\n      </CarouselContext.Provider>\n    );\n  }\n);\n\nCarousel.displayName = 'Carousel';\n\n// Carousel Content (ScrollView)\nexport interface CarouselContentProps {\n  children: React.ReactNode;\n  autoPlay?: boolean;\n  autoPlayInterval?: number;\n  loop?: boolean;\n  className?: string;\n}\n\nconst CarouselContent = React.forwardRef<\n  React.ElementRef<typeof ScrollView>,\n  CarouselContentProps\n>(({ children, autoPlay = false, autoPlayInterval = 3000, loop = false, className }, ref) => {\n  const { scrollViewRef, currentIndex, itemWidth, scrollToIndex } = useCarousel();\n  const autoPlayTimerRef = React.useRef<NodeJS.Timeout | null>(null);\n\n  const items = React.Children.toArray(children);\n  const itemCount = items.length;\n\n  // Update context with item count\n  const context = React.useContext(CarouselContext);\n  React.useEffect(() => {\n    if (context) {\n      (context as any).itemCount = itemCount;\n    }\n  }, [itemCount, context]);\n\n  const [localIndex, setLocalIndex] = React.useState(0);\n\n  const handleScroll = React.useCallback(\n    (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n      const offsetX = event.nativeEvent.contentOffset.x;\n      const index = Math.round(offsetX / itemWidth);\n\n      if (index !== localIndex && index >= 0 && index < itemCount) {\n        setLocalIndex(index);\n        // Update parent context\n        if (context) {\n          (context as any).currentIndex = index;\n        }\n      }\n    },\n    [localIndex, itemWidth, itemCount, context]\n  );\n\n  // Auto-play\n  const scrollToNext = React.useCallback(() => {\n    if (!scrollViewRef.current || itemCount === 0) return;\n\n    let nextIndex = localIndex + 1;\n\n    if (nextIndex >= itemCount) {\n      if (loop) {\n        nextIndex = 0;\n      } else {\n        return;\n      }\n    }\n\n    scrollToIndex(nextIndex);\n  }, [localIndex, itemCount, loop, scrollViewRef, scrollToIndex]);\n\n  React.useEffect(() => {\n    if (autoPlay && itemCount > 1) {\n      autoPlayTimerRef.current = setInterval(scrollToNext, autoPlayInterval);\n      return () => {\n        if (autoPlayTimerRef.current) {\n          clearInterval(autoPlayTimerRef.current);\n        }\n      };\n    }\n  }, [autoPlay, autoPlayInterval, scrollToNext, itemCount]);\n\n  React.useImperativeHandle(ref, () => scrollViewRef.current as ScrollView);\n\n  return (\n    <ScrollView\n      ref={scrollViewRef}\n      horizontal\n      pagingEnabled\n      showsHorizontalScrollIndicator={false}\n      onScroll={handleScroll}\n      scrollEventThrottle={16}\n      decelerationRate=\"fast\"\n      snapToInterval={itemWidth}\n      snapToAlignment=\"center\"\n      className={className}\n    >\n      {items.map((item, index) => (\n        <View key={index} style={{ width: itemWidth }}>\n          {item}\n        </View>\n      ))}\n    </ScrollView>\n  );\n});\n\nCarouselContent.displayName = 'CarouselContent';\n\n// Carousel Item\nexport interface CarouselItemProps extends React.ComponentPropsWithoutRef<typeof View> {\n  children: React.ReactNode;\n}\n\nconst CarouselItem = React.forwardRef<React.ElementRef<typeof View>, CarouselItemProps>(\n  ({ className, children, ...props }, ref) => (\n    <View ref={ref} className={cn('w-full h-full', className)} {...props}>\n      {children}\n    </View>\n  )\n);\n\nCarouselItem.displayName = 'CarouselItem';\n\n// Carousel Pagination (Dots) - Fully customizable\nexport interface CarouselPaginationProps extends React.ComponentPropsWithoutRef<typeof View> {\n  variant?: 'dots' | 'line' | 'numbers';\n  renderDot?: (index: number, isActive: boolean) => React.ReactNode;\n}\n\nconst CarouselPagination = React.forwardRef<\n  React.ElementRef<typeof View>,\n  CarouselPaginationProps\n>(({ variant = 'dots', renderDot, className, ...props }, ref) => {\n  const { currentIndex, itemCount, scrollToIndex } = useCarousel();\n\n  if (itemCount <= 1) return null;\n\n  const defaultDotRender = (index: number, isActive: boolean) => {\n    if (variant === 'numbers') {\n      return (\n        <Pressable\n          key={index}\n          onPress={() => scrollToIndex(index)}\n          className={cn(\n            'w-8 h-8 rounded-full items-center justify-center',\n            isActive ? 'bg-primary' : 'bg-muted'\n          )}\n        >\n          <Text className={cn('text-sm', isActive ? 'text-primary-foreground' : 'text-muted-foreground')}>\n            {index + 1}\n          </Text>\n        </Pressable>\n      );\n    }\n\n    if (variant === 'line') {\n      return (\n        <Pressable\n          key={index}\n          onPress={() => scrollToIndex(index)}\n          className={cn(\n            'h-1 rounded-full transition-all',\n            isActive ? 'w-8 bg-primary' : 'w-4 bg-muted'\n          )}\n        />\n      );\n    }\n\n    // Default dots variant\n    return (\n      <Pressable\n        key={index}\n        onPress={() => scrollToIndex(index)}\n        className={cn(\n          'h-2 rounded-full transition-all',\n          isActive ? 'w-6 bg-primary' : 'w-2 bg-muted'\n        )}\n      />\n    );\n  };\n\n  return (\n    <View\n      ref={ref}\n      className={cn('flex-row justify-center items-center gap-2', className)}\n      {...props}\n    >\n      {Array.from({ length: itemCount }).map((_, index) =>\n        renderDot ? renderDot(index, index === currentIndex) : defaultDotRender(index, index === currentIndex)\n      )}\n    </View>\n  );\n});\n\nCarouselPagination.displayName = 'CarouselPagination';\n\n// Carousel Previous Button\n// To use with icons: Pass your icon as children\n// Example: <CarouselPrevious><ChevronLeftIcon /></CarouselPrevious>\nexport interface CarouselPreviousProps extends React.ComponentPropsWithoutRef<typeof Pressable> {\n  children?: React.ReactNode;\n}\n\nconst CarouselPrevious = React.forwardRef<\n  React.ElementRef<typeof Pressable>,\n  CarouselPreviousProps\n>(({ children, className, ...props }, ref) => {\n  const { currentIndex, scrollToPrevious } = useCarousel();\n  const isDisabled = currentIndex === 0;\n\n  return (\n    <Pressable\n      ref={ref}\n      onPress={scrollToPrevious}\n      disabled={isDisabled}\n      className={cn(\n        'h-10 w-10 rounded-full bg-background/80 items-center justify-center border border-border',\n        isDisabled && 'opacity-50',\n        className\n      )}\n      {...props}\n    >\n      {children || <Text className=\"text-foreground text-xl\">‹</Text>}\n    </Pressable>\n  );\n});\n\nCarouselPrevious.displayName = 'CarouselPrevious';\n\n// To use with icons: Pass your icon as children\n// Example: <CarouselNext><ChevronRightIcon /></CarouselNext>\n// Carousel Next Button\nexport interface CarouselNextProps extends React.ComponentPropsWithoutRef<typeof Pressable> {\n  children?: React.ReactNode;\n}\n\nconst CarouselNext = React.forwardRef<React.ElementRef<typeof Pressable>, CarouselNextProps>(\n  ({ children, className, ...props }, ref) => {\n    const { currentIndex, itemCount, scrollToNext } = useCarousel();\n    const isDisabled = currentIndex === itemCount - 1;\n\n    return (\n      <Pressable\n        ref={ref}\n        onPress={scrollToNext}\n        disabled={isDisabled}\n        className={cn(\n          'h-10 w-10 rounded-full bg-background/80 items-center justify-center border border-border',\n          isDisabled && 'opacity-50',\n          className\n        )}\n        {...props}\n      >\n        {children || <Text className=\"text-foreground text-xl\">›</Text>}\n      </Pressable>\n    );\n  }\n);\n\nCarouselNext.displayName = 'CarouselNext';\n\nexport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPagination,\n  CarouselPrevious,\n  CarouselNext,\n\n};\n",
      "type": "registry:ui"
    }
  ]
}