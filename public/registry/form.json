{
  "name": "form",
  "type": "ui",
  "description": "Form components with React Hook Form and validation",
  "dependencies": [
    "clsx",
    "react-hook-form",
    "@hookform/resolvers",
    "zod"
  ],
  "devDependencies": [],
  "registryDependencies": [
    "label"
  ],
  "files": [
    {
      "path": "ui/form.tsx",
      "content": "import * as React from 'react';\nimport { View, Text } from 'react-native';\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from 'react-hook-form';\nimport { cn } from '@/lib/utils';\nimport { Label } from '@/components/ui/label';\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState, formState } = useFormContext();\n\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error('useFormField should be used within <FormField>');\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: \\`\\${id}-form-item\\`,\n    formDescriptionId: \\`\\${id}-form-item-description\\`,\n    formMessageId: \\`\\${id}-form-item-message\\`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n);\n\ninterface FormItemProps extends React.ComponentPropsWithoutRef<typeof View> {}\n\nconst FormItem = React.forwardRef<React.ElementRef<typeof View>, FormItemProps>(\n  ({ className, ...props }, ref) => {\n    const id = React.useId();\n\n    return (\n      <FormItemContext.Provider value={{ id }}>\n        <View ref={ref} className={cn('space-y-2', className)} {...props} />\n      </FormItemContext.Provider>\n    );\n  }\n);\nFormItem.displayName = 'FormItem';\n\ninterface FormLabelProps extends React.ComponentPropsWithoutRef<typeof Label> {}\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof Label>,\n  FormLabelProps\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField();\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && 'text-destructive', className)}\n      nativeID={formItemId}\n      {...props}\n    />\n  );\n});\nFormLabel.displayName = 'FormLabel';\n\ninterface FormControlProps extends React.ComponentPropsWithoutRef<typeof View> {}\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof View>,\n  FormControlProps\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\n\n  return (\n    <View\n      ref={ref}\n      nativeID={formItemId}\n      accessibilityDescribedBy={\n        !error\n          ? formDescriptionId\n          : \\`\\${formDescriptionId} \\${formMessageId}\\`\n      }\n      accessibilityInvalid={!!error}\n      {...props}\n    />\n  );\n});\nFormControl.displayName = 'FormControl';\n\ninterface FormDescriptionProps extends React.ComponentPropsWithoutRef<typeof Text> {}\n\nconst FormDescription = React.forwardRef<\n  React.ElementRef<typeof Text>,\n  FormDescriptionProps\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField();\n\n  return (\n    <Text\n      ref={ref}\n      nativeID={formDescriptionId}\n      className={cn('text-sm text-muted-foreground', className)}\n      {...props}\n    />\n  );\n});\nFormDescription.displayName = 'FormDescription';\n\ninterface FormMessageProps extends React.ComponentPropsWithoutRef<typeof Text> {\n  children?: React.ReactNode;\n}\n\nconst FormMessage = React.forwardRef<\n  React.ElementRef<typeof Text>,\n  FormMessageProps\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField();\n  const body = error ? String(error?.message) : children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <Text\n      ref={ref}\n      nativeID={formMessageId}\n      className={cn('text-sm font-medium text-destructive', className)}\n      {...props}\n    >\n      {body}\n    </Text>\n  );\n});\nFormMessage.displayName = 'FormMessage';\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n};\n",
      "type": "registry:ui"
    }
  ]
}