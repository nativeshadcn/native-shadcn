{
  "name": "combobox",
  "type": "registry:ui",
  "description": "A combobox component with autocomplete",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "utils",
    "button",
    "popover",
    "command"
  ],
  "files": [
    {
      "path": "ui/combobox.tsx",
      "content": "import * as React from 'react';\nimport { View, TextInput, ScrollView, Text, Pressable } from 'react-native';\nimport { cn } from '@/lib/utils';\n\ntype ComboboxContextValue = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  value?: string;\n  onValueChange?: (value: string) => void;\n  search: string;\n  setSearch: (search: string) => void;\n};\n\nconst ComboboxContext = React.createContext<ComboboxContextValue | undefined>(undefined);\n\nfunction useCombobox() {\n  const context = React.useContext(ComboboxContext);\n  if (!context) {\n    throw new Error('Combobox components must be used within <Combobox>');\n  }\n  return context;\n}\n\ninterface ComboboxProps {\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  value?: string;\n  onValueChange?: (value: string) => void;\n  children?: React.ReactNode;\n}\n\nconst Combobox = ({ \n  open = false, \n  onOpenChange, \n  value, \n  onValueChange, \n  children \n}: ComboboxProps) => {\n  const [internalOpen, setInternalOpen] = React.useState(open);\n  const [search, setSearch] = React.useState('');\n\n  const isControlled = open !== undefined && onOpenChange !== undefined;\n  const currentOpen = isControlled ? open : internalOpen;\n  const handleOpenChange = isControlled ? onOpenChange : setInternalOpen;\n\n  const contextValue = React.useMemo(\n    () => ({\n      open: currentOpen,\n      onOpenChange: handleOpenChange,\n      value,\n      onValueChange,\n      search,\n      setSearch,\n    }),\n    [currentOpen, handleOpenChange, value, onValueChange, search]\n  );\n\n  return (\n    <ComboboxContext.Provider value={contextValue}>\n      <View className=\"relative\">{children}</View>\n    </ComboboxContext.Provider>\n  );\n};\n\nconst ComboboxTrigger = React.forwardRef<\n  React.ElementRef<typeof Pressable>,\n  React.ComponentPropsWithoutRef<typeof Pressable>\n>(({ onPress, ...props }, ref) => {\n  const { onOpenChange } = useCombobox();\n\n  return (\n    <Pressable\n      ref={ref}\n      onPress={(e) => {\n        onOpenChange(true);\n        onPress?.(e);\n      }}\n      {...props}\n    />\n  );\n});\nComboboxTrigger.displayName = 'ComboboxTrigger';\n\nconst ComboboxInput = React.forwardRef<\n  React.ElementRef<typeof TextInput>,\n  React.ComponentPropsWithoutRef<typeof TextInput>\n>(({ className, onChangeText, onFocus, ...props }, ref) => {\n  const { search, setSearch, onOpenChange } = useCombobox();\n\n  return (\n    <TextInput\n      ref={ref}\n      value={search}\n      onChangeText={(text) => {\n        setSearch(text);\n        onOpenChange(true);\n        onChangeText?.(text);\n      }}\n      onFocus={(e) => {\n        onOpenChange(true);\n        onFocus?.(e);\n      }}\n      className={cn(\n        'h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm',\n        className\n      )}\n      {...props}\n    />\n  );\n});\nComboboxInput.displayName = 'ComboboxInput';\n\nconst ComboboxContent = React.forwardRef<\n  React.ElementRef<typeof View>,\n  React.ComponentPropsWithoutRef<typeof View>\n>(({ className, children, ...props }, ref) => {\n  const { open, onOpenChange } = useCombobox();\n\n  if (!open) return null;\n\n  return (\n    <View\n      ref={ref}\n      className={cn(\n        'absolute top-full left-0 right-0 z-50 mt-1 max-h-60 rounded-md border border-border bg-background shadow-lg',\n        className\n      )}\n      {...props}\n    >\n      <ScrollView>{children}</ScrollView>\n    </View>\n  );\n});\nComboboxContent.displayName = 'ComboboxContent';\n\nconst ComboboxEmpty = React.forwardRef<\n  React.ElementRef<typeof View>,\n  React.ComponentPropsWithoutRef<typeof View>\n>(({ className, children = 'No results found.', ...props }, ref) => (\n  <View\n    ref={ref}\n    className={cn('py-6 text-center text-sm', className)}\n    {...props}\n  >\n    <Text className=\"text-muted-foreground\">{children}</Text>\n  </View>\n));\nComboboxEmpty.displayName = 'ComboboxEmpty';\n\ninterface ComboboxItemProps extends React.ComponentPropsWithoutRef<typeof Pressable> {\n  value: string;\n  children: React.ReactNode;\n}\n\nconst ComboboxItem = React.forwardRef<\n  React.ElementRef<typeof Pressable>,\n  ComboboxItemProps\n>(({ className, value: itemValue, onPress, children, ...props }, ref) => {\n  const { value, onValueChange, onOpenChange, search } = useCombobox();\n  const isSelected = value === itemValue;\n\n  // Filter logic\n  const shouldShow = React.useMemo(() => {\n    if (!search) return true;\n    const searchLower = search.toLowerCase();\n    const childText = typeof children === 'string' ? children : '';\n    return childText.toLowerCase().includes(searchLower);\n  }, [search, children]);\n\n  if (!shouldShow) return null;\n\n  return (\n    <Pressable\n      ref={ref}\n      onPress={(e) => {\n        onValueChange?.(itemValue);\n        onOpenChange(false);\n        onPress?.(e);\n      }}\n      className={cn(\n        'px-3 py-2 active:bg-accent',\n        isSelected && 'bg-accent',\n        className\n      )}\n      {...props}\n    >\n      {typeof children === 'string' ? (\n        <Text className=\"text-sm\">{children}</Text>\n      ) : (\n        children\n      )}\n    </Pressable>\n  );\n});\nComboboxItem.displayName = 'ComboboxItem';\n\nexport { \n  Combobox, \n  ComboboxTrigger,\n  ComboboxInput,\n  ComboboxContent, \n  ComboboxEmpty,\n  ComboboxItem,\n};\n",
      "type": "registry:ui"
    }
  ]
}