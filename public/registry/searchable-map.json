{
  "name": "searchable-map",
  "type": "registry:ui",
  "description": "A searchable map component",
  "dependencies": [
    "react-native-maps"
  ],
  "devDependencies": [],
  "registryDependencies": [
    "utils",
    "map-view",
    "input"
  ],
  "files": [
    {
      "path": "ui/searchable-map.tsx",
      "content": "import * as React from 'react';\nimport { View, Text, FlatList, Pressable, Dimensions, FlatListProps } from 'react-native';\nimport MapView from 'react-native-maps';\nimport { MapView as CustomMapView, MapMarkerData, MapLocation } from '@/components/ui/map-view';\nimport { cn } from '@/lib/utils';\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\n\n// Context for sharing state between components\ntype SearchableMapContextValue = {\n  selectedId: string | null;\n  setSelectedId: (id: string | null) => void;\n  onMarkerPress?: (markerId: string, markerData: any) => void;\n  onItemPress?: (item: any) => void;\n};\n\nconst SearchableMapContext = React.createContext<SearchableMapContextValue | undefined>(undefined);\n\nfunction useSearchableMap() {\n  const context = React.useContext(SearchableMapContext);\n  if (!context) {\n    throw new Error('SearchableMap components must be used within <SearchableMap>');\n  }\n  return context;\n}\n\n// Root SearchableMap Component\ninterface SearchableMapProps extends React.ComponentPropsWithoutRef<typeof View> {\n  selectedId?: string | null;\n  onSelectedIdChange?: (id: string | null) => void;\n  onMarkerPress?: (markerId: string, markerData: any) => void;\n  onItemPress?: (item: any) => void;\n}\n\nconst SearchableMap = React.forwardRef<\n  React.ElementRef<typeof View>,\n  SearchableMapProps\n>(({ selectedId, onSelectedIdChange, onMarkerPress, onItemPress, className, children, ...props }, ref) => {\n  const [internalSelectedId, setInternalSelectedId] = React.useState<string | null>(null);\n\n  const isControlled = selectedId !== undefined;\n  const currentSelectedId = isControlled ? selectedId : internalSelectedId;\n  const handleSelectedIdChange = isControlled ? onSelectedIdChange : setInternalSelectedId;\n\n  const contextValue = React.useMemo(\n    () => ({\n      selectedId: currentSelectedId,\n      setSelectedId: handleSelectedIdChange || (() => {}),\n      onMarkerPress,\n      onItemPress,\n    }),\n    [currentSelectedId, handleSelectedIdChange, onMarkerPress, onItemPress]\n  );\n\n  return (\n    <SearchableMapContext.Provider value={contextValue}>\n      <View ref={ref} className={cn('flex-1', className)} {...props}>\n        {children}\n      </View>\n    </SearchableMapContext.Provider>\n  );\n});\nSearchableMap.displayName = 'SearchableMap';\n\n// SearchableMapView - The map component\ninterface SearchableMapViewProps extends Omit<React.ComponentPropsWithoutRef<typeof CustomMapView>, 'selectedMarkerId' | 'onMarkerPress'> {\n  markers: MapMarkerData[];\n  userLocation?: MapLocation;\n  radius?: number;\n  markerColor?: string;\n  selectedMarkerColor?: string;\n  renderMarker?: (marker: MapMarkerData, isSelected: boolean) => React.ReactNode;\n  renderUserMarker?: () => React.ReactNode;\n}\n\nconst SearchableMapView = React.forwardRef<\n  MapView,\n  SearchableMapViewProps\n>(({ markers, userLocation, radius, ...props }, ref) => {\n  const { selectedId, setSelectedId, onMarkerPress } = useSearchableMap();\n\n  const handleMarkerPress = React.useCallback(\n    (markerId: string, marker: MapMarkerData) => {\n      setSelectedId(markerId);\n      onMarkerPress?.(markerId, marker);\n    },\n    [setSelectedId, onMarkerPress]\n  );\n\n  return (\n    <CustomMapView\n      ref={ref}\n      markers={markers}\n      userLocation={userLocation}\n      radius={radius}\n      selectedMarkerId={selectedId}\n      onMarkerPress={handleMarkerPress}\n      {...props}\n    />\n  );\n});\nSearchableMapView.displayName = 'SearchableMapView';\n\n// SearchableMapList - The list component\ninterface SearchableMapListProps<T extends MapMarkerData> extends Omit<FlatListProps<T>, 'data' | 'renderItem'> {\n  data: T[];\n  renderItem: (item: T, isSelected: boolean) => React.ReactNode;\n}\n\nfunction SearchableMapList<T extends MapMarkerData>({\n  data,\n  renderItem,\n  ...props\n}: SearchableMapListProps<T>) {\n  const { selectedId, setSelectedId, onItemPress } = useSearchableMap();\n\n  const handleItemPress = React.useCallback(\n    (item: T) => {\n      setSelectedId(item.id);\n      onItemPress?.(item);\n    },\n    [setSelectedId, onItemPress]\n  );\n\n  return (\n    <FlatList\n      data={data}\n      keyExtractor={(item) => item.id}\n      renderItem={({ item }) => (\n        <Pressable onPress={() => handleItemPress(item)}>\n          {renderItem(item, item.id === selectedId)}\n        </Pressable>\n      )}\n      {...props}\n    />\n  );\n}\nSearchableMapList.displayName = 'SearchableMapList';\n\n// SearchableMapListHeader - Header for the list\ninterface SearchableMapListHeaderProps extends React.ComponentPropsWithoutRef<typeof View> {\n  title?: string;\n  description?: string;\n  count?: number;\n}\n\nconst SearchableMapListHeader = React.forwardRef<\n  React.ElementRef<typeof View>,\n  SearchableMapListHeaderProps\n>(({ className, title, description, count, children, ...props }, ref) => (\n  <View ref={ref} className={cn('px-4 pb-2 border-b border-border', className)} {...props}>\n    {title && (\n      <Text className=\"font-semibold text-base text-foreground\">\n        {title} {count !== undefined && `(${count})`}\n      </Text>\n    )}\n    {description && (\n      <Text className=\"text-sm text-muted-foreground mt-1\">{description}</Text>\n    )}\n    {children}\n  </View>\n));\nSearchableMapListHeader.displayName = 'SearchableMapListHeader';\n\n// SearchableMapEmpty - Empty state\ninterface SearchableMapEmptyProps extends React.ComponentPropsWithoutRef<typeof View> {\n  title?: string;\n  description?: string;\n  icon?: React.ReactNode;\n}\n\nconst SearchableMapEmpty = React.forwardRef<\n  React.ElementRef<typeof View>,\n  SearchableMapEmptyProps\n>(({ className, title = 'No results', description, icon, children, ...props }, ref) => (\n  <View ref={ref} className={cn('items-center justify-center p-8', className)} {...props}>\n    {icon}\n    <Text className=\"text-muted-foreground text-center font-medium\">{title}</Text>\n    {description && (\n      <Text className=\"text-muted-foreground text-center text-sm mt-1\">{description}</Text>\n    )}\n    {children}\n  </View>\n));\nSearchableMapEmpty.displayName = 'SearchableMapEmpty';\n\n// SearchableMapFilters - Floating filter button\ninterface SearchableMapFiltersProps extends React.ComponentPropsWithoutRef<typeof Pressable> {\n  active?: boolean;\n}\n\nconst SearchableMapFilters = React.forwardRef<\n  React.ElementRef<typeof Pressable>,\n  SearchableMapFiltersProps\n>(({ className, active, children, ...props }, ref) => (\n  <View className=\"absolute top-4 right-4 z-10\">\n    <Pressable\n      ref={ref}\n      className={cn(\n        'bg-background rounded-full p-3 shadow-lg flex-row items-center',\n        active && 'bg-primary',\n        className\n      )}\n      {...props}\n    >\n      {children || <Text className={active ? 'text-primary-foreground' : 'text-foreground'}>üîç</Text>}\n      {active && <View className=\"ml-2 w-2 h-2 rounded-full bg-primary-foreground\" />}\n    </Pressable>\n  </View>\n));\nSearchableMapFilters.displayName = 'SearchableMapFilters';\n\nexport {\n  SearchableMap,\n  SearchableMapView,\n  SearchableMapList,\n  SearchableMapListHeader,\n  SearchableMapEmpty,\n  SearchableMapFilters,\n};\n",
      "type": "registry:ui"
    }
  ]
}