{
  "name": "command",
  "type": "registry:ui",
  "description": "A command palette component",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "utils",
    "dialog"
  ],
  "files": [
    {
      "path": "ui/command.tsx",
      "content": "import * as React from 'react';\nimport { View, TextInput, ScrollView, Text, Pressable } from 'react-native';\nimport { cn } from '@/lib/utils';\n\ntype CommandContextValue = {\n  search: string;\n  setSearch: (search: string) => void;\n  filtered: Set<string>;\n  onItemSelect?: (value: string) => void;\n};\n\nconst CommandContext = React.createContext<CommandContextValue | undefined>(undefined);\n\nfunction useCommand() {\n  const context = React.useContext(CommandContext);\n  if (!context) {\n    throw new Error('Command components must be used within <Command>');\n  }\n  return context;\n}\n\ninterface CommandProps extends React.ComponentPropsWithoutRef<typeof View> {\n  onValueChange?: (value: string) => void;\n  filter?: (value: string, search: string) => boolean;\n}\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof View>,\n  CommandProps\n>(({ className, children, onValueChange, filter, ...props }, ref) => {\n  const [search, setSearch] = React.useState('');\n  const [filtered] = React.useState(new Set<string>());\n\n  const contextValue = React.useMemo(\n    () => ({\n      search,\n      setSearch,\n      filtered,\n      onItemSelect: onValueChange,\n    }),\n    [search, filtered, onValueChange]\n  );\n\n  return (\n    <CommandContext.Provider value={contextValue}>\n      <View\n        ref={ref}\n        className={cn(\n          'flex h-full w-full flex-col overflow-hidden rounded-md bg-background',\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </View>\n    </CommandContext.Provider>\n  );\n});\nCommand.displayName = 'Command';\n\nconst CommandDialog = ({\n  open,\n  onOpenChange,\n  children,\n}: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  children: React.ReactNode;\n}) => {\n  return (\n    <Modal\n      visible={open}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={() => onOpenChange(false)}\n    >\n      <View className=\"flex-1 justify-center bg-black/50 px-4\">\n        <View className=\"overflow-hidden rounded-md bg-popover\">\n          {children}\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof TextInput>,\n  React.ComponentPropsWithoutRef<typeof TextInput>\n>(({ className, onChangeText, ...props }, ref) => {\n  const { setSearch } = useCommand();\n\n  return (\n    <View className=\"flex items-center border-b border-border px-3\">\n      <TextInput\n        ref={ref}\n        className={cn(\n          'flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground',\n          className\n        )}\n        onChangeText={(text) => {\n          setSearch(text);\n          onChangeText?.(text);\n        }}\n        {...props}\n      />\n    </View>\n  );\n});\nCommandInput.displayName = 'CommandInput';\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof ScrollView>,\n  React.ComponentPropsWithoutRef<typeof ScrollView>\n>(({ className, ...props }, ref) => (\n  <ScrollView\n    ref={ref}\n    className={cn('max-h-[300px] overflow-y-auto', className)}\n    {...props}\n  />\n));\nCommandList.displayName = 'CommandList';\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof View>,\n  React.ComponentPropsWithoutRef<typeof View>\n>(({ className, children = 'No results found.', ...props }, ref) => {\n  const { search } = useCommand();\n\n  if (!search) return null;\n\n  return (\n    <View\n      ref={ref}\n      className={cn('py-6 text-center text-sm', className)}\n      {...props}\n    >\n      <Text className=\"text-muted-foreground\">{children}</Text>\n    </View>\n  );\n});\nCommandEmpty.displayName = 'CommandEmpty';\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof View>,\n  React.ComponentPropsWithoutRef<typeof View> & { heading?: string }\n>(({ className, heading, children, ...props }, ref) => (\n  <View\n    ref={ref}\n    className={cn('overflow-hidden p-1', className)}\n    {...props}\n  >\n    {heading && (\n      <Text className=\"px-2 py-1.5 text-xs font-medium text-muted-foreground\">\n        {heading}\n      </Text>\n    )}\n    {children}\n  </View>\n));\nCommandGroup.displayName = 'CommandGroup';\n\ninterface CommandItemProps extends React.ComponentPropsWithoutRef<typeof Pressable> {\n  value?: string;\n  keywords?: string[];\n}\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof Pressable>,\n  CommandItemProps\n>(({ className, value, keywords, onPress, children, ...props }, ref) => {\n  const { search, onItemSelect } = useCommand();\n\n  const shouldShow = React.useMemo(() => {\n    if (!search) return true;\n    const searchLower = search.toLowerCase();\n    const valueLower = value?.toLowerCase() || '';\n    const keywordsMatch = keywords?.some(k => k.toLowerCase().includes(searchLower));\n    \n    return valueLower.includes(searchLower) || keywordsMatch;\n  }, [search, value, keywords]);\n\n  if (!shouldShow) return null;\n\n  return (\n    <Pressable\n      ref={ref}\n      className={cn(\n        'relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none active:bg-accent active:text-accent-foreground',\n        className\n      )}\n      onPress={(e) => {\n        if (value && onItemSelect) {\n          onItemSelect(value);\n        }\n        onPress?.(e);\n      }}\n      {...props}\n    >\n      {children}\n    </Pressable>\n  );\n});\nCommandItem.displayName = 'CommandItem';\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof View>,\n  React.ComponentPropsWithoutRef<typeof View>\n>(({ className, ...props }, ref) => (\n  <View\n    ref={ref}\n    className={cn('-mx-1 h-px bg-border', className)}\n    {...props}\n  />\n));\nCommandSeparator.displayName = 'CommandSeparator';\n\nconst CommandShortcut = ({\n  children,\n  className,\n}: {\n  children: string;\n  className?: string;\n}) => {\n  return (\n    <Text\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n    >\n      {children}\n    </Text>\n  );\n};\nCommandShortcut.displayName = \"CommandShortcut\";\n\nexport {\n  Command,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandSeparator,\n};\n",
      "type": "registry:ui"
    }
  ]
}